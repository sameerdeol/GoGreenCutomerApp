<app-common-header></app-common-header>
<ion-content>
  <div class="page_outer_div">
    <!-- Loading Spinner -->
    <div class="loading-container" *ngIf="isLoading">
      <ion-spinner name="crescent" class="loading-spinner"></ion-spinner>
      <p class="loading-text">Loading stores...</p>
    </div>

    <!-- No Data Message -->
    <div class="no-data-container" *ngIf="!isLoading && (!Allvendors || Allvendors.length === 0)">
      <ion-icon name="storefront-outline" class="no-data-icon"></ion-icon>
      <h3>No Bookmarked Stores</h3>
      <p>You haven't bookmarked any stores yet.</p>
    </div>

    <!-- Vendors List -->
    <div class="features_product_div" *ngIf="!isLoading && Allvendors && Allvendors.length > 0">
          <div class="slider_heading_div">
            <h3>Bookmarked Stores</h3>
          </div>

          <ion-card *ngFor="let item of Allvendors; let i = index"
            class="mb-3 home_vendor_card_box vendor-card-with-carousel" (click)="handleVendorClick(i, item)"
            (mouseenter)="onVendorHover(i, true)" (mouseleave)="onVendorHover(i, false)"
            (touchstart)="onVendorTouch(i)">

            <!-- Bookmark/Favorite Button -->
            <div class="bookmark_outer_div">
              <ion-button fill="clear" (click)="toggleFav(item); $event.stopPropagation()"
                class="bookmark-btn book_mark_button">
                <ion-icon class="bookmark-icon"
                  [name]="item?.is_favourite == 1 ? 'bookmark' : 'bookmark-outline'">
                </ion-icon>
              </ion-button>
            </div>

            <!-- Image Carousel Container -->
            <div class="vendor-image-carousel-container w-100 vendor_slider home_all_vendor_big_box">
              <!-- Image Stack for Carousel Effect -->
              <div class="store-image-stack">
                <img *ngFor="let img of getVendorImages(item); let imgIndex = index" [src]="img"
                  alt="vendor store image" class="vendor_store_img box_vendor_images store-carousel-image"
                  [style.opacity]="getVendorImageOpacity(i, imgIndex)"
                  [style.transform]="getVendorImageTransform(i, imgIndex)"
                  [style.z-index]="getCurrentVendorImageIndex(i) === imgIndex ? 2 : 1" />
              </div>

              <!-- Dots Pagination (only show if multiple images) -->
              <div class="store-dots-pagination" *ngIf="item?.featured_images?.length > 1">
                <span *ngFor="let img of item.featured_images; let dotIndex = index" class="store-pagination-dot"
                  [class.active]="getCurrentVendorImageIndex(i) === dotIndex">
                </span>
              </div>

            </div>

            <!-- Store Information -->
            <ion-card-header class="vendor_text_box">
              <div class="d-flex align-items-center justify-content-between">
                <div class="font-weight-bold vendor-heading-primary">{{ item.store_name }}</div>
                <div class="vendor_rating">
                  {{ item.rating || '3.9' }}
                  <ion-icon class="text-white" name="star"></ion-icon>
                </div>
              </div>
              <div class="d-flex align-items-center">
                <img src="assets/timer-icon.svg" alt="">
                <p class="mb-0 font-weight-bold text-gray">
                  {{ item.vendor_start_time }}AM - {{ item.vendor_close_time }}PM
                </p>
              </div>
            </ion-card-header>
          </ion-card>
        </div>
  </div>
  

</ion-content>
<app-footer-tabs></app-footer-tabs>