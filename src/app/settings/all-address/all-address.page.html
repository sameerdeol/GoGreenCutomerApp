<app-common-header></app-common-header>

<ion-content>
  <div class="page-container">
    <!-- Loading State -->
    <div *ngIf="isLoading" class="loading-container">
      <ion-spinner name="crescent" class="loading-spinner"></ion-spinner>
      <p class="loading-text">Loading addresses...</p>
    </div>

    <!-- Address List -->
    <div *ngIf="!isLoading && savedUserAddress && savedUserAddress.length > 0" class="addresses-container">
      <div class="addresses-header">
        <h2>My Addresses</h2>
        <span class="address-count">{{ savedUserAddress.length }} address{{ savedUserAddress.length !== 1 ? 'es' : '' }}</span>
      </div>

      <div class="addresses-list">
        <ion-card *ngFor="let address of savedUserAddress; trackBy: trackByFn" class="address-card">
          <ion-card-content>
            <div class="address-main">
              <div class="address-type-badge" [class]="getTypeClass(address.type)">
                <ion-icon [name]="getTypeIcon(address.type)"></ion-icon>
                <span>{{ getAddressType(address.type) }}</span>
              </div>
              
              <div class="address-actions">
                <!-- <ion-button fill="clear" size="small" (click)="editAddress(address)" class="action-btn edit-btn">
                  <ion-icon name="create-outline"></ion-icon>
                </ion-button> -->
                <ion-button fill="clear" size="small" (click)="deleteUserAddress(address.id)" class="action-btn delete-btn">
                  <ion-icon name="trash-outline"></ion-icon>
                </ion-button>
              </div>
            </div>

            <div class="address-content">
              <h3 class="address-title">{{ address.address }}</h3>
              
              <div class="address-details">
                <div class="detail-item" *ngIf="address.floor">
                  <ion-icon name="business-outline"></ion-icon>
                  <span>Floor {{ address.floor }}</span>
                </div>
                <div class="detail-item" *ngIf="address.landmark">
                  <ion-icon name="flag-outline"></ion-icon>
                  <span>{{ address.landmark }}</span>
                </div>
              </div>
            </div>
          </ion-card-content>
        </ion-card>
      </div>
    </div>

    <!-- Empty State -->
    <div class="empty-state" *ngIf="!isLoading && (!savedUserAddress || savedUserAddress.length === 0)">
      <div class="empty-icon">
        <ion-icon name="location-outline"></ion-icon>
      </div>
      <h3>No Addresses Yet</h3>
      <p>Add your first address to get started with deliveries</p>
      <ion-button fill="solid" routerLink="/add-address" class="add-address-btn">
        <ion-icon name="add" slot="start"></ion-icon>
        Add Address
      </ion-button>
    </div>
  </div>
</ion-content>